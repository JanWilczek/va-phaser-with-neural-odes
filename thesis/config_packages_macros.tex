%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength{\headheight}{15pt}
\usepackage{ifthen}

\usepackage[USenglish, ngerman]{babel}       % to be able to select the language with the \selectlanguage command
\usepackage{setspace}                        % for double and onehalf spacing

\usepackage{hyperref}                        %
\usepackage{makeidx}                         %
%\usepackage{a4wide}                   
\usepackage{url}                             %
\usepackage{amssymb}                         %
\usepackage{amsmath}                         %
\usepackage{theorem}                         %

%\pdfadjustspacing=1

\ifpdf
\usepackage[%
	expansion=true, % better typography, but with much larger PDF file.
	protrusion=true
]{microtype}
\fi


\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{algorithm}                       % for pseudo-code and algorithms

\usepackage{algpseudocode}
\usepackage{tocloft}                         % nicer part in toc
\usepackage[titletoc,page,header]{appendix}  % for a nicer appendix

% \usepackage{breakurl}                      % to allow line breaks in urls
\usepackage{booktabs}                        % for nicer looking tables
\usepackage[printonlyused]{acronym}          % nice list of acronyms
%\usepackage{thesis}                          % create a page layout with margins for binding a two-sided book that has exactly the same printable size as the a4wide package provides.
\usepackage{fancyhdr}            % for nice headers and footers


%% \myGeometryLayout is used as boolean switch for the twoside option in geometry package
%% 

\if\myPageLayout twoside
	\newcommand{\myGeometryLayout}{twoside\,}
\else
	\newcommand{\myGeometryLayout}{}
\fi
\usepackage[%
%showframe,%
\myGeometryLayout width=16cm,inner=3cm,lines=47,vmarginratio={3:4},top=3.5cm,headsep=15pt,footskip=35pt]{geometry}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%$% MY CUSTOM PACKAGES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{circuitikz}
\usepackage{pgfplots}
\usepackage{siunitx}
\usetikzlibrary{patterns,shapes.arrows,calc,dsp,chains}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% layout
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagestyle{plain}
%\textwidth 15cm
\setlength{\parindent}{0em}
\setlength{\parsep}{10ex plus0.2ex minus0.2ex}
\setlength{\parskip}{1.5ex}
\setcounter{topnumber}{4}
\setcounter{totalnumber}{6}
\renewcommand{\topfraction}{1}       % Legt den Anteil des Platzes am oberen Rand einer Seite fest, bis zu dem Gleitobjekte plaziert werden können.
\renewcommand{\bottomfraction}{1}    % Legt den Anteil des Platzes einer Seite fest, den Gleitobjekte (z.B. Abbildungen) am unteren Seitenrand einnehmen können.
\renewcommand{\textfraction}{0}      % Legt den Anteil des Platzes einer Seite mit Gleitobjekten fest, der mindestens für Text zur Verfügung steht.
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{1}


% nice table of contents
\renewcommand{\cftpartpresnum}{Part }
\setlength{\cftbeforepartskip}{48pt}
\renewcommand{\cftpartpresnum}{\hrule \vspace*{1.5mm}} % line before Part
\renewcommand{\cftpartafterpnum}{\vspace*{1.5mm} \hrule} % line after Part
\addtolength{\cftchapindent}{5mm}
\addtolength{\cftsecindent}{5mm} 

% ------------ HEADERS AND FOOTERS ------------------------

\fancypagestyle{onesidemine}{%
\fancyhf{} % clear all header and footer fields
\fancyhead[L]{\textsf{\uppercase{\leftmark}}}%
\fancyhead[R]{\textsf{\uppercase{\leftmark}}}%
\fancyhead[R]{\thepage}%
%\fancyfoot[L]{\scriptsize \invnummer}%
\fancyfoot[R]{\scriptsize Master Thesis, \myName}
\renewcommand{\headrulewidth}{0.4pt} %
\renewcommand{\footrulewidth}{0.4pt} %
}

\fancypagestyle{twosidemine}{
\fancyhf{} % clear all header and footer fields
\fancyhead[RO]{{\uppercase{\rightmark}}}%
\fancyhead[LE]{{\uppercase{\leftmark}}}%
\fancyfoot[C]{\thepage}%
%\fancyfoot[RE,LO]{\scriptsize \invnummer}%
%\fancyfoot[LE,RO]{\scriptsize Master Thesis, \myName}
\fancyfoot[RO RE]{\scriptsize Master Thesis, \myName}
\renewcommand{\headrulewidth}{0.4pt} %
\renewcommand{\footrulewidth}{0.4pt} %
}

\fancypagestyle{blank}{\fancyhf{}
\renewcommand{\headrulewidth}{0pt} %
\renewcommand{\footrulewidth}{0pt} %
}

% Clear Header Style on the Last Empty Odd pages (for two-sided printing}
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else%
   \hbox{}%
   \thispagestyle{blank}%              % Empty header styles
   \newpage%
   \if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother

\fancypagestyle{mine}{\pagestyle{\myPageLayout mine}} % one-sided

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% theorem
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\theorembodyfont{\upshape}
\newtheorem{Theorem}{Theorem}[chapter]
\newtheorem{Definition}{Definition}[chapter]
\newtheorem{lemma}[Theorem]{Lemma}
\newtheorem{cor}[Theorem]{Corollary}
\newtheorem{Def}[Theorem]{Definition}
\newtheorem{example}[Theorem]{Example}
\newtheorem{algo}[Theorem]{Algorithm}

\def\proof{{\bf Proof: \,}}
\newcommand{\qed}{\hfill $\Box$}
\newcommand{\myqed}{\hfill $\Box$}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Makros General
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\N{{\mathbb N}}
\def\Z{{\mathbb Z}}
\def\Q{{\mathbb Q}}
\def\R{{\mathbb R}}
\def\C{{\mathbb C}}

\newcommand{\ip}[2]{\langle{#1}|{#2}\rangle}
\newcommand{\norm}[1]{|\!|{#1}|\!|}
\DeclareMathOperator*{\argmin}{argmin}
\newcommand{\MATLAB}{\textsc{MATLAB}}



% macros for referencing figures, tables, equations and so on

\newcommand{\Figure}[1]{Figure~\ref{#1}}
\newcommand{\SubFigure}[2]{Figure~\ref{#1}\,(#2)}
\newcommand{\SubFigures}[3]{Figure~\ref{#1}~(#2) and (#3)}
\newcommand{\SubFigureRange}[3]{Figure~\ref{#1}(#2)--(#3)}

\newcommand{\FigureStart}[1]{Figure~\ref{#1}} 
\newcommand{\SubFigureStart}[2]{Figure~\ref{#1}(#2)}
\newcommand{\SubFiguresStart}[3]{Figures~\ref{#1}(#2) and \ref{#1}(#3)}

\newcommand{\Equation}[1]{Equation~\eqref{#1}}
\newcommand{\Equations}[2]{Equations~\eqref{#1} and~\eqref{#2}}
\newcommand{\Equationst}[3]{Equations~\eqref{#1},~\eqref{#2} and~\eqref{#3}}
\newcommand{\Table}[1]{Table~\ref{#1}}
\newcommand{\Tables}[2]{Tables~\ref{#1}~and~\ref{#2}}
\newcommand{\Section}[1]{Section~\ref{#1}}
\newcommand{\Sections}[2]{Sections~\ref{#1}~and~\ref{#2}}
\newcommand{\Sectionss}[2]{Sections~\ref{#1}--\ref{#2}}
\newcommand{\Chapter}[1]{Chapter~\ref{#1}}
\newcommand{\Chapters}[2]{Chapters~\ref{#1}~and~\ref{#2}}
\newcommand{\Appendix}[1]{Appendix~\ref{#1}}
\newcommand{\Algorithm}[1]{Algorithm~\ref{#1}}

\newcommand{\page}[1]{page~\pageref{#1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% MISCELLANEOUS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\vfuzz2pt % Don't report over-full v-boxes if over-edge is small
%\hfuzz2pt % Don't report over-full h-boxes if over-edge is small

%
%\newcommand{\checklat}[1]{\textcolor{red}{\textbf{**#1**}}}  % to notify stuff to be checked later
\newcommand{\chapstar}[1]{%
\cleardoublepage \phantomsection%
\addcontentsline{toc}{chapter}{#1}%
 \chapter*{#1}%
\markboth{\uppercase{#1}}{\uppercase{#1}}%
\acresetall}

\usepackage{framed}
\newenvironment{wichtigbox}{%
  \def\FrameCommand{\fboxrule 0.2mm \fcolorbox{black}{white}}%
  \MakeFramed {\advance\hsize-\width \FrameRestore}}%
 {\endMakeFramed}


\makeindex



% set chapter marks (headers)
\renewcommand{\chaptermark}[1]{%
\markboth{\thechapter.~\uppercase{#1}}{\thechapter.~\uppercase{#1}}}
\renewcommand{\sectionmark}[1]{%
\markright{\thesection~\uppercase{#1}}}



% http://tex.stackexchange.com/questions/4139/how-to-change-font-size-mid-document
\newenvironment{localsize}[1]
{%
  \clearpage
  \let\orignewcommand\newcommand
  \let\newcommand\renewcommand
  \makeatletter
  \input{bk#1.clo}%
  \makeatother
  \let\newcommand\orignewcommand
}
{%
  \clearpage
}
